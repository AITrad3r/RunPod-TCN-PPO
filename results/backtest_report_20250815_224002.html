
<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8" />
  <title>PPO Report - BACKTEST</title>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
  <style>
    body { font-family: Arial, sans-serif; margin: 20px; }
    h1 { margin-bottom: 0; }
    .section { margin-top: 24px; }
    .grid { display: grid; grid-template-columns: 1fr; gap: 16px; }
    @media (min-width: 980px) { .grid { grid-template-columns: 1fr 1fr; } }
    .card { padding: 16px; border: 1px solid #eaeaea; border-radius: 8px; box-shadow: 0 1px 2px rgba(0,0,0,0.03); }
    table { width: 100%; font-size: 14px; }
    th, td { text-align: left; }
  </style>
</head>
<body>
  <h1>PPO Report - BACKTEST</h1>
  <p><strong>Model:</strong> best_model_episode_0.pt | <strong>Window:</strong> 2025-08-05 13:00:00 → 2025-08-12 13:00:00</p>

  <div class="grid">
    <div class="card">
      <h2>Summary Metrics</h2>
      <table style='border-collapse:collapse;border:1px solid #ddd'><tr><th style='text-align:left;padding:6px 10px'>Window</th><td style='padding:6px 10px'>2025-08-05 13:00:00 → 2025-08-12 13:00:00</td></tr><tr><th style='text-align:left;padding:6px 10px'>Win Rate</th><td style='padding:6px 10px'>45.45%</td></tr><tr><th style='text-align:left;padding:6px 10px'>Composite</th><td style='padding:6px 10px'>41.48%</td></tr><tr><th style='text-align:left;padding:6px 10px'>Trades/Day</th><td style='padding:6px 10px'>0.000</td></tr><tr><th style='text-align:left;padding:6px 10px'>Profit Factor</th><td style='padding:6px 10px'>2.082</td></tr><tr><th style='text-align:left;padding:6px 10px'>Sortino</th><td style='padding:6px 10px'>2087.493</td></tr><tr><th style='text-align:left;padding:6px 10px'>Calmar</th><td style='padding:6px 10px'>3881.850</td></tr><tr><th style='text-align:left;padding:6px 10px'>Max Drawdown</th><td style='padding:6px 10px'>0.08%</td></tr><tr><th style='text-align:left;padding:6px 10px'>SQN</th><td style='padding:6px 10px'>1.124</td></tr><tr><th style='text-align:left;padding:6px 10px'>Total Trades</th><td style='padding:6px 10px'>11</td></tr><tr><th style='text-align:left;padding:6px 10px'>Final Balance</th><td style='padding:6px 10px'>0.00</td></tr></table>
    </div>
    <div class="card">
      <h2>Equity & Drawdown</h2>
      <div id="equity_chart" style="height:360px"></div>
      <div id="dd_chart" style="height:240px;margin-top:12px"></div>
    </div>
  </div>

  <div class="section card">
    <h2>Trade-by-Trade</h2>
    <table style='border-collapse:collapse;border:1px solid #ddd'><thead><tr><th style='text-align:left;padding:6px 10px'>entry_time</th><th style='text-align:left;padding:6px 10px'>exit_time</th><th style='text-align:left;padding:6px 10px'>position_type</th><th style='text-align:left;padding:6px 10px'>entry_price</th><th style='text-align:left;padding:6px 10px'>exit_price</th><th style='text-align:left;padding:6px 10px'>pnl</th><th style='text-align:left;padding:6px 10px'>return_pct</th></tr></thead><tbody><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-10 15:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-10 18:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118768.8460</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118590.8530</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>9.9895</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>0.15%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-10 19:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-10 20:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118555.2864</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118626.4303</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-4.0000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-0.06%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-10 23:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 00:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119089.9070</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119161.3717</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-4.0000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-0.06%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 01:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 02:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>long</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119125.6340</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119304.4297</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>10.0105</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>0.15%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 09:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 10:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>121689.8372</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>121507.4666</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>9.9895</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>0.15%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 14:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 15:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>120022.3000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>120094.3242</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-4.0000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-0.06%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 17:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 18:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119950.3191</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119770.5554</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>9.9895</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>0.15%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-11 23:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 00:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>long</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118875.7701</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118804.4767</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-4.0000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-0.06%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 03:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 04:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>119054.1908</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118875.7701</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>9.9895</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>0.15%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 06:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 08:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>short</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118804.4767</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118875.7701</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-4.0000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-0.06%</td></tr><tr><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 09:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>2025-08-12 10:00:00</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>long</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118804.4767</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>118733.2261</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-4.0000</td><td style='padding:6px 10px;border-top:1px solid #f0f0f0'>-0.06%</td></tr></tbody></table>
  </div>

  <script>
    const dts = ["2025-08-10 12:00:00", "2025-08-10 13:00:00", "2025-08-10 14:00:00", "2025-08-10 15:00:00", "2025-08-10 16:00:00", "2025-08-10 17:00:00", "2025-08-10 18:00:00", "2025-08-10 19:00:00", "2025-08-10 20:00:00", "2025-08-10 21:00:00", "2025-08-10 22:00:00", "2025-08-10 23:00:00", "2025-08-11 00:00:00", "2025-08-11 01:00:00", "2025-08-11 02:00:00", "2025-08-11 03:00:00", "2025-08-11 04:00:00", "2025-08-11 05:00:00", "2025-08-11 06:00:00", "2025-08-11 07:00:00", "2025-08-11 08:00:00", "2025-08-11 09:00:00", "2025-08-11 10:00:00", "2025-08-11 11:00:00", "2025-08-11 12:00:00", "2025-08-11 13:00:00", "2025-08-11 14:00:00", "2025-08-11 15:00:00", "2025-08-11 16:00:00", "2025-08-11 17:00:00", "2025-08-11 18:00:00", "2025-08-11 19:00:00", "2025-08-11 20:00:00", "2025-08-11 21:00:00", "2025-08-11 22:00:00", "2025-08-11 23:00:00", "2025-08-12 00:00:00", "2025-08-12 01:00:00", "2025-08-12 02:00:00", "2025-08-12 03:00:00", "2025-08-12 04:00:00", "2025-08-12 05:00:00", "2025-08-12 06:00:00", "2025-08-12 07:00:00", "2025-08-12 08:00:00", "2025-08-12 09:00:00", "2025-08-12 10:00:00", "2025-08-12 11:00:00", "2025-08-12 12:00:00", "2025-08-12 13:00:00"];
    const equity = [10000.0, 10000.0, 10000.0, 10000.0, 10000.0, 10000.0, 10009.989507870037, 10009.989507870037, 10005.989507870037, 10005.989507870037, 10005.989507870037, 10005.989507870037, 10001.989507870037, 10001.989507870037, 10012.000012596218, 10012.000012596218, 10012.000012596218, 10012.000012596218, 10012.000012596218, 10012.000012596218, 10012.000012596218, 10012.000012596218, 10021.989520466257, 10021.989520466257, 10021.989520466257, 10021.989520466257, 10021.989520466257, 10017.989520466257, 10017.989520466257, 10017.989520466257, 10027.979028336296, 10027.979028336296, 10027.979028336296, 10027.979028336296, 10027.979028336296, 10027.979028336296, 10023.979028336296, 10023.979028336296, 10023.979028336296, 10023.979028336296, 10033.968536206336, 10033.968536206336, 10033.968536206336, 10033.968536206336, 10029.968536206336, 10029.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336, 10025.968536206336];
    const drawdown = [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0003996008184479241, 0.0003996008184479241, 0.0003996008184479241, 0.0003996008184479241, 0.0007992016368958482, 0.0007992016368958482, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0003991223490936066, 0.0003991223490936066, 0.0003991223490936066, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0003988839614340144, 0.0003988839614340144, 0.0003988839614340144, 0.0003988839614340144, 0.0, 0.0, 0.0, 0.0, 0.00039864585837263636, 0.00039864585837263636, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727, 0.0007972917167452727];

    if (equity && equity.length > 0) {
      const eqTrace = { x: dts.length === equity.length ? dts : Array.from({length: equity.length}, (_, i) => i), y: equity, mode: 'lines', name: 'Equity' };
      Plotly.newPlot('equity_chart', [eqTrace], { margin: { t: 30 }, xaxis: { title: 'Time' }, yaxis: { title: 'Balance' }, showlegend: false });
    } else {
      document.getElementById('equity_chart').innerHTML = '<p>No equity data available.</p>';
    }

    if (drawdown && drawdown.length > 0) {
      const ddTrace = { x: dts.length === drawdown.length ? dts : Array.from({length: drawdown.length}, (_, i) => i), y: drawdown.map(v => v * 100), mode: 'lines', name: 'Drawdown (%)' };
      Plotly.newPlot('dd_chart', [ddTrace], { margin: { t: 30 }, xaxis: { title: 'Time' }, yaxis: { title: 'Drawdown %' }, showlegend: false });
    } else {
      document.getElementById('dd_chart').innerHTML = '<p>No drawdown data available.</p>';
    }
  </script>
</body>
</html>
